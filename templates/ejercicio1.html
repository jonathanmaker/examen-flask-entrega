{% extends "base.html" %}

{% block title %}Ejercicio 1 - Descuento Pinturas{% endblock %}

{% block content %}
<section class="form-section">
    <h2>Ejercicio 1: Descuento en compra de tarros de pintura</h2>
    <p>Cada tarro de pintura tiene un valor de <strong>$9.000</strong>.</p>

    {% if error %}
        <div class="alert alert-error">{{ error }}</div>
    {% endif %}

    <form method="post" class="form-card">
        <div class="form-group">
            <label for="nombre">Nombre de la persona:</label>
            <input type="text" id="nombre" name="nombre" required>
        </div>

        <div class="form-group">
            <label for="edad">Edad:</label>
            <input type="number" id="edad" name="edad" min="1" required>
        </div>

        <div class="form-group">
            <label for="tarros">Cantidad de tarros de pintura:</label>
            <input type="number" id="tarros" name="tarros" min="1" required>
        </div>

        <button type="submit" class="btn btn-submit">Calcular</button>
    </form>

    {% if resultado %}
        <div class="result-card">
            <h3>Resumen de la compra</h3>
            <p><strong>Nombre:</strong> {{ resultado.nombre }}</p>
            <p><strong>Edad:</strong> {{ resultado.edad }} años</p>
            <p><strong>Cantidad de tarros:</strong> {{ resultado.tarros }}</p>
            <p><strong>Total sin descuento:</strong> ${{ "{:,.0f}".format(resultado.total_sin_descuento) }}</p>

            {% if resultado.porcentaje_descuento > 0 %}
                <p><strong>Descuento aplicado:</strong> {{ resultado.porcentaje_descuento }}%</p>
                <p><strong>Total a pagar con descuento:</strong> ${{ "{:,.0f}".format(resultado.total_con_descuento) }}</p>
            {% else %}
                <p><strong>Descuento aplicado:</strong> No corresponde descuento para menores de 18 años.</p>
                <p><strong>Total a pagar:</strong> ${{ "{:,.0f}".format(resultado.total_sin_descuento) }}</p>
            {% endif %}
        </div>
    {% endif %}

    <div class="back-link">
        <a href="{{ url_for('index') }}">Volver al menú principal</a>
    </div>
</section>
{% endblock %}
